<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<head>
</head>
<body>
<metal:main fill-slot="main"
     tal:define="context_state context/@@plone_context_state;
                 fields view/imageFields">

  <div tal:repeat="field fields">
      <h2 i18n:translate="">Edit croppable images</h2>
      <div class="documentDescription">For each image field in your content you can
        select below the scales you want to re-crop.</div>
      <h2 tal:content="field">Image</h2>
        <h3 i18n:translate="">Original image</h3>
        <img src="" tal:attributes="src string:${context/absolute_url}/${field}_preview"/>
      <tal:scale tal:define="croppingScales python:view.croppingScales(field)" 
          tal:repeat="scale croppingScales">
        <h3 tal:define="size python:croppingScales[scale]"
            tal:content="string:${scale} ${size}">Portrait</h3>
        <img src=""
          tal:attributes="
            src string:${context/absolute_url}/${field}_${scale};
            data-field field;
            data-scale scale"/>
        <div class="formControls">
          <a class="selImageToCropBtn"
            tal:attributes="href string:${context/absolute_url}/cropimage?field=${field}&scale=${scale};"
            i18n:translate="">Re-crop</a>
        </div>
      </tal:scale>
  </div>

</metal:main>
</body>
</html>